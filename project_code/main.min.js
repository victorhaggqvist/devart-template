function lockTime(){timeLock=!0,setTimeout(function(){timeLock=!1},timeBetweenDraws)}function makeStuffHappen(a){if(console.log(a.keyCode),!timeLock){lockTime();var b=30,c=!1;97===a.keyCode&&rideX-b>=0&&(rideX-=b,c=!0),115===a.keyCode&&rideY+b+shapeSize<=base.height&&(rideY+=b,c=!0),100===a.keyCode&&rideX+b+shapeSize<=base.width&&(rideX+=b,c=!0),119===a.keyCode&&rideY-b>=0&&(rideY-=b,c=!0),c&&drawRide(rideX,rideY),114===a.keyCode&&clearCanvas()}}function makeRect(a,b,c,d){var e=20;a.beginPath(),a.moveTo(b,c),a.lineTo(b,c+e),a.lineTo(b+e,c+e),a.lineTo(b+e,c),a.lineTo(b,c),a.closePath(),a.strokeStyle=d,a.stroke()}function makeTriangle(a,b,c,d){var e=20;b+=e/2,a.beginPath(),a.moveTo(b,c),a.lineTo(b-e/2,c+e),a.lineTo(b+e/2,c+e),a.lineTo(b,c),a.closePath(),a.strokeStyle=d,a.stroke()}function makeCircle(a,b,c,d){var e=10;a.beginPath(),a.arc(b+e,c+e,e,0,2*Math.PI),a.closePath(),a.strokeStyle=d,a.stroke()}function drawRide(a,b){var c=Math.floor(3*Math.random())+0,d=Math.floor(Math.random()*(colors.length-0+1))+0;0===c&&(makeCircle(context,a,b,colors[d]),replayString+=c+":"+a+":"+b+":"+d+";"),1===c&&(makeRect(context,a,b,colors[d]),replayString+=c+":"+a+":"+b+":"+d+";"),2===c&&(makeTriangle(context,a,b,colors[d]),replayString+=c+":"+a+":"+b+":"+d+";")}function clearCanvas(){base.width=base.width,context.fillRect(0,0,base.width,base.height)}function replayArt(a){console.log("replaying"),parts=a.split(";"),clearCanvas(),paintReplay()}function paintReplay(){var a=parts.shift().split(":");console.log(a),"0"===a[0]&&(console.log("circle"),makeCircle(context,parseInt(a[1]),parseInt(a[2]),colors[a[3]])),"1"===a[0]&&(console.log("rect"),makeRect(context,parseInt(a[1]),parseInt(a[2]),colors[a[3]])),"2"===a[0]&&(console.log("tri"),makeTriangle(context,parseInt(a[1]),parseInt(a[2]),colors[a[3]])),parts.length>0&&setTimeout(paintReplay,timeBetweenDraws)}var colors=["#FF0000","#800000","#FFFF00","#808000","#00FF00","#008000","#00FFFF","#008080","#0000FF","#000080","#FF00FF","#800080"],base=document.getElementById("base"),context=base.getContext("2d"),rideY,rideX,timeBetweenDraws=100,timeLock,shapeSize=20,replayString="",apikey="482eb53700e867a37c1ed9ee47b75882";window.addEventListener("keypress",makeStuffHappen,!1),context.canvas.width=window.innerWidth-4,context.canvas.height=window.innerHeight-4-51,document.addEventListener("DOMContentLoaded",function(){rideX=Math.floor(Math.random()*(context.canvas.width-40-40+1))+40,rideY=Math.floor(Math.random()*(context.canvas.height-40-40+1))+40}),document.getElementById("tweet").onclick=function(){base.toDataURL("image/png");console.log(replayString)};var parts="";clearCanvas(),console.log(window.location.hash),window.location.hash.split("#")[1]&&(console.log("incomming: "+window.location.hash.split("#")[1]),replayArt(window.location.hash.split("#")[1]));for(var i=colors.length-1;i>=0;i--);for(var i=colors.length-1;i>=0;i--);for(var i=colors.length-1;i>=0;i--);